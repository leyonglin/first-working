

find / -name sh.sh | xargs file                                                                 将命令输出结果传递给另一个命令
 
后台执行& 或者Ctrl+z + bg

ping www.baidu.com | awk '{print $0"\t" strftime("%Y-%m-%d %H:%M:%S",systime())}' >>/tmp/ping &     添加时间

ssh -p 22 -C -f -N -g -L 9200:192.168.1.19:9200 ihavecat@192.168.1.19

du -sh /* |  grep "G" | sort -rn     查看文件大小

pv   将字符串顺序输出

pstree -p                                                                                           搜索进程IP

ps -aux | sort -rnk 4 | head                                                                        内存高的

ps -aux | sort -rnk 3 | head                                                                        cpu高的

ps -eo ...

ss -nat | awk '{print $1}'|grep -v State | sort | uniq -c | sort -rn                                       查看网络连接状态

ss -anpl |grep -w 8080 | grep tcp |awk '{print $5}' | awk -F: '{print $1}' | uniq -c | sort -nr     统计8080端口的相同ip连接数

ss -pan | grep -w port                  通过端口查服务/服务
[ps -C service]                        通过服务查pid]
ss -pan | grep pid                   通过pid找端口


win10截图：win+shift+s   钉钉：ctrl+shift+A  

查看本机IP：curl https://ip.cn             curl ifconfig.me

window远程链接：win+R 输入mstsc

ps命令：1.ps -uroot  2.ps -ef | grep ssh  |grep -v grep  3.ps -C 命令或进程名   4.ps -l(后台非进程)
        5.ps aux 内存中的程序    6.ps -o pid,ppid

pwd命令:当当前目录被删除，用/bin/pwd会报错      选项-P显示源路径(非链接) -L显示连接路径

mkdir命令:选项-p(递归创建)  -m(+带数字权限)  -v(显示创建信息) 
mkdir -vp scf/{lib/,bin/,doc/{info,product},logs/{info,product},service/deploy/{info,product}}


wc：-c 统计字节数   -l 统计行数    -m 统计字符数，这个标志不能与 -c 标志一起使用。
    -w 统计单词数，一个字被定义为由空白、跳格或换行字符分隔的字符串   -L 打印最长行的字符数。



lsof -n |awk '{print $2}'|sort|uniq -c |sort -nr|more     查看文件句柄数量

nc -zvw3  ip  port                             netcat查看端口是否开启(z不读写扫描v显性输出w3超时3秒)
nmap ip -p port                                nmap可用审计
telnet ip port

dig 默认会解析A记录与CNAME记录

默认输出5部分第一部分显示 dig 命令的版本和输入的参数。
第二部分显示服务返回的一些技术详情，比较重要的是 status。如果 status 的值为 NOERROR 则说明本次查询成功结束。
第三部分中的 "QUESTION SECTION" 显示我们要查询的域名。
第四部分的 "ANSWER SECTION" 是查询到的结果。
第五部分则是本次查询的一些统计信息，比如用了多长时间，查询了哪个 DNS 服务器，在什么时间进行的查询等等。

类型	目的
A	    地址记录，用来指定域名的 IPv4 地址，如果需要将域名指向一个 IP 地址，就需要添加 A 记录。
AAAA	用来指定主机名(或域名)对应的 IPv6 地址记录。
CNAME	如果需要将域名指向另一个域名，再由另一个域名提供 ip 地址，就需要添加 CNAME 记录。
MX	    如果需要设置邮箱，让邮箱能够收到邮件，需要添加 MX 记录。
NS    	域名服务器记录，用来指定该域名由哪个DNS服务器来进行解析，如果需要把子域名交给其他 DNS 服务器解析，就需要添加 NS 记录。
SOA	    这种记录是所有区域性文件中的强制性记录。它必须是一个文件中的第一个记录。
TXT	    可以写任何东西，长度限制为 255。绝大多数的 TXT记录是用来做 SPF 记录(反垃圾邮件)。

TTL 是 DNS 解析中很重要的指标，主要是控制 DNS 记录在 DNS 服务器上的缓存时间，位于ANSWER SECTION第二列

指定dns服务器查询：dig @8.8.8.8 abc.com(默认以/etc/reslov.conf为准)
简略查询：dig   abc.com  +short 
追踪整个查询过程：dig @8.8.8.8  821810.com +trace
自定义查询：dig abc.com +noall +answer
            dig +nocmd  +noall abc.com  +answer  
            dig abc.com +nocomments +noquestion +noauthority +noadditional +nostats
			
tcp协议查询：dig abc.com +tcp
反向查询：dig   -x   8.8.8.8    

tcping 域名 端口

screen：
查看：screen -ls
创建：screen -S  起名 /screen vim /etc/passwd(直接进入)  
      ---> ctrl+a+d   保存并退出当前screen

重新连接：screen -r 16582 或者 screen -R name ---> C-a  k 杀掉当前窗口  C-a x 关闭一个终端
杀死：kill  pid
C-a叫做命令字符（command character）
创建分屏
上下分屏：ctrl + a  再按shift + s    上屏top命令
切换导下屏：ctrl + a  再按tab键
创建下屏终端：ctrl + a  再按c        下屏tail -f 命令

使用工具tmux
1，输入命令tmux使用工具
2，上下分屏：ctrl + b  再按 "
3，左右分屏：ctrl + b  再按 %
4，切换屏幕：ctrl + b  再按o
5，关闭一个终端：ctrl + b  再按x
6，上下分屏与左右分屏切换： ctrl + b  再按空格键

file [-z压缩文件 -L链接 -i] filename可以查看文件类型/目录          type cmd 可以查看命令类型

man：参数[-aw(显示所有手册路径)   -f简短描述信息 
n(指定章节手册) 1用户命令 2系统调用 3 c库函数调用 4.设备文件及特殊文件(/dev下的各种设备文件) 5配置文件 6系统游戏使用帮助 7附件/变量 8管理工具(root)及守护进程 9含糊的内核规范和接口]  


Rpm：-q 查询是否下载  -qa下载多少软件包  -qi软件包信息  -ql文件安装目录   -qf+文件路径  -ivh下载  -Uvh升级 -e删除  
Yum：yum check-update列出所有可更新的软件清单  yum update/yum list update安装所有更新软件 yum list列出所有可安b的软件清单(比rpm -qi简略一点) 
      yum provides +命令或文件路径  yum search +包关键字   yum info+updates/installed 可更新/已安装详细信息 
	yum deplist+软件包  查看依赖    yum clean all 清除下载缓存


reboot重启/{halt/poweroff 立刻关机} 
shutdown -r/h now 立刻重启(root用户使用) 
shutdown -r/h 10 过10分钟自动重启(root用户使用) 
shutdown -r/h 20:35 在时间为20:35时候重启(root用户使用)  
参数：-k 发警告给登陆者    -c "message" 取消关机程序

nsupdate是一个动态DNS更新工具，可以向DNS服务器提交更新记录的请求，它可以从区文件中添加或删除资源记录，而不需要手动进行编辑区文件


scp -P 220 ubuntu.tar  192.168.126.128:/root      指定端口

iconv命令是用来转换文件的编码方式:
iconv -c -f utf-8 -t gb2312 docker_vmlist.csv -o docker_vmlist_`date+%H%M`.csv

lrzsz该软件包含window与xshell相互传输数据的命令。

midecode命令可以让你在Linux系统下获取有关硬件方面的信息。dmidecode的作用是将DMI数据库中的信息解码，以可读的文本方式显示。由于DMI信息可以人为修改

查看服务器型号：dmidecode | grep 'Product Name'
查看主板的序列号：dmidecode |grep 'Serial Number'
查看系统序列号：dmidecode -s system-serial-number
查看内存信息：dmidecode -t memory
查看OEM信息：dmidecode -t 11

tar：caf压缩  tvf预览  xf解压

tree：-L(显示层数)
-C(color) -f(完整的相对路径) -d(仅目录) -D(修改时间) -t(修改时间排序) -g(组)-u(所有者) -p(权限) -s(大小) 
-F 在执行文件，目录，Socket，符号连接，管道名称名称，各自加上"*","/","=","@","|"号




Journalctl：日志查询    
man systemd.journal-fields  /  man journalctl
  journalctl -u httpd.service  --since today -o json/json-pretty  -n20[-f]
    journalctl                                  查看所有日志(默认只保存本次启动日志) 
    journalctl -k                               查看内核日志
    journalctl -b                               查看系统本次启动的日志
    journalctl --list-boots / journalctl -b -1
    journalctl --since="2017-10-30 18:10:30"    ["2017-01-10"|"yesterday"|"09:00"|"1 hour ago"|"20 min ago"]   可以使用--since和--until选项过滤任意时间限制
    journalctl -u httpd.service  --since today
    journalctl _PID=8088                        使用_UID或者_GID (id user)
    journalctl -F _UID/_GID                     id  UID/GID
    journalctl -p err/3 -b                      优先级(0: emerg  1: alert  2: crit  3: err  4: warning  5: notice  6: info  7: debug)
	journalctl -n20                             显示倒数20行
	journalctl -f                               追踪
	journalctl /usr/bin/bash                    按可执行文件的路径过滤
	journalctl  -u httpd -o json/json-pretty    输出格式
		cat: 只显示信息字段本身。
		export: 适合传输或备份的二进制格式。
		json: 标准JSON，每行一个条目。
		json-pretty: JSON格式，适合人类阅读习惯。
		json-sse: JSON格式，经过打包以兼容server-sent事件。
		short: 默认syslog类输出格式。
		short-iso: 默认格式，强调显示ISO 8601挂钟时间戳。
		short-monotonic: 默认格式，提供普通时间戳。
		short-precise: 默认格式，提供微秒级精度。
		verbose: 显示该条目的全部可用journal字段，包括通常被内部隐藏的字段。
		
  systemd-journald 服务收集到的日志默认保存在 /run/log 目录中，重启系统会丢掉以前的日志信息。 我们可以通过两种方式让 systemd-journald 服务把所有的日志都保存到文件中，这样重新启动后就不会丢掉以前的日志。
     方法一：创建目录 /var/log/journal，然后重启日志服务 systemd-journald.service。
     方法二：修改配置文件 /etc/systemd/journald.conf，把 Storage=auto 改为 Storage=persistent，并取消注释，然后重启日志服务 systemd-journald.service。

	
 维护：1.journalctl --disk-usage(当前已使用空间)    2.journalctl --vacuum-size=1G(最大空间)   3.journalctl --vacuum-time=1years(保存时间)
   配置文件/etc/systemd/journald.conf(该Storage=选项设置为“persistent”以启用持久记录 Storage=persistent) 
   SystemMaxUse=: 指定journal所能使用的最高持久存储容量。
   SystemKeepFree=: 指定journal在添加新条目时需要保留的剩余空间。
   SystemMaxFileSize=: 控制单一journal文件大小，符合要求方可被转为持久存储。
   RuntimeMaxUse=: 指定易失性存储中的最大可用磁盘容量（/run文件系统之内）。
   RuntimeKeepFree=: 指定向易失性存储内写入数据时为其它应用保留的空间量（/run文件系统之内）。
   RuntimeMaxFileSize=: 指定单一journal文件可占用的最大易失性存储容量（/run文件系统之内）























