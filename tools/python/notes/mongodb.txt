

01： MongoDB基本概念 常用数据类型

数据存储阶段
文件管理阶段：
	优点：使用简单，展现只管，长期保存，存储数据量比较大    
	缺点：查找不方便，容易找出数据冗余，数据格式不规范
数据库管理阶段：
	优点：将数据结构化存储，降低冗余，提高了增删改查效率，方便扩展和程序调用
	缺点：数据库往往需要指令或语句操作，相对复杂

数据：能够输入到计算机中并被识别处理的信息的集合
数据结构：组成一个数据集合的数据之间的关系
数据库：按照一定的数据结构，存储数据的仓库(外存储器)
	    在数据库管理系统管理和控制下，在一定介质上的数据集合
数据库管理系统：数据库管理软件，用于建立维护操作数据库
数据库系统：由数据库和数据库管理系统高等开发工具组成的集合
关系型数据库：采用关系模型(二维表)来组织数据结构的数据库
	Oracle(甲骨文)  db2(IBM)  sqlserver(window)  mysql(开源)  sqlite3(内置模块)
	优点：逻辑容易理解，使用方便(都是用sql语句且sql语句成熟),数据一致性高，冗余低，数据完整性好，便于操作，功能强大，支持很多复杂操作
	缺点：每次操作都要进行sql语句解析,消耗大，操作往往需要加锁，数据一致性高(字段固定，所以存储不灵活)，海量数据时，读写显得不足
	

非关系型数据库(nosql,not only sql)
	优点：高并发，读写能力强，弱化数据结构一致性，使用灵活，有良好的可拓展性
	缺点：通用性差，操作灵活导致容易出错和混乱，没有外键关联等复杂操作，版本更新快
适用场景：
	1.对数据存储灵活性要求高，一致性要求低
	2.数据处理海量并发，要求瞬间效率速度比较高
	3.数据比较容易建立
	4.网站临时缓冲存储，爬虫应用
nosql:
	1.键值型数据库：redis
	2.文档型数据库：mongodb
	3.列存储数据库：hbace
	4.图形数据库
mongodb数据库标签：非关系型数据库，文档型数据库，最像关系型的非关系型数据库
	特点：
	1.是由c++编写的数据库管理系统
	2.支持丰富的数据操作，增删改查索引聚合
	3.支持丰富的数据类型
	4.使用方便，可以很好的拓展，相对比较成熟
	5.支持众多的编程语言接口(python php  c++ c#)
	
mongodb的安装
	yum安装
	源码安装
	默认端口：27017
mongo：进入数据库交互操作界面
mongo shell:用来操作mongodb数据库的界面，在这里可以使用mongo语句操作数据库内容

	mysql           mongodb   			含义
	database		database			数据库
	table			collection			表/集合
	column			field				字段/域
	row				document			记录/文档
	index 			index				索引


操作：
	use databaseName     #存在则进入该数据库，不存在则创建，且不会马上创建，而是插入数据后才会创建(创建一个对象)
	show dbs             #查看系统中的数据库
		admin:存储用户信息
		local:存储本地数据
		config:存储分片信息
	
	db     #mongodb的全局量，代表当前正在使用的数据库
		   如果不选择使用任何数据库db，默认是test，直接插入数据就会建立test数据库
	db.dropDatabase()   #删除db所代表的数据库
	1.db.createCollection(collection_name)   #创建集合
	2.当向一个集合中插入数据的时候如果集合不存在时则自动创建---db.class.insert({'name':'lin','age':'25','sex':'man'})
	show collections   // show table   #查看集合
	db.coll_name.drop()     #删除集合
	db.coll_name.renameCollection("新名")   #重命名集合
	db.coll_name.insert({})  #插入文档数据，键值对数据格式，插入时id域不存在则创建，存在则报错(db.class0 == db.getCollection('class0')
		db.class.insert({'name':'lin','age':'25','sex':'man'})  == inserOne
		db.class.insert([{'3':'3'},{'2':'2'}])   #插入多条文档  == inserMany
	db.coll_name.find()     #查找文档
	db.coll_name.save()     #插入时id域不存在则创建，存在则修改
数据库命名规则：
	1.使用utf-8(默认)
	2.不能含有空格 . / \ '\0' 字符
	3.长度不超过64字节
	4.不能和系统数据库重名
	
集合命名规则：
	1.合法的UTF-8字符
	2.不能有'\0'
	3.不能以system.开头，这是系统保留集合前缀
	4.不能和关键字重合
	
文档：mongodb中数据的组织形式
	是以键值对的形成组成的一组数据，类似python中字典描述数据的方式
	1.文档中键值对是有序的
	2.文档中键值对严格区分大小写	
键：即文档的域，表达了一个键值对的含义
键的命名规则：
	1.utf-8格式的字符串
	2.不能使用'\0'
	3.一个文档中的键不能重复
值：即文档存储的数据

数据库的备份和恢复
	备份：mongodump -h host -d dbname -o path
	恢复：mongorestore -h dbhost:port -d dbname path    #目标库不存在则会自动创建
数据监控运行数据：mongostat
	insert  query update delete getmore command flushes(每秒和磁盘交互次数) mapped  vsize(虚拟内存)    res(物理内存) faults  locked db idx miss %     qr|qw   ar|aw  netIn netOut  conn       time(时间)	
监控数据库读写时长：mongotop
	 ns(数据表)       total(总时间)        read(读时间)       write(写时间)	


类型：整型，布尔类型，浮点型，Array，Data，Timestamp，string，symbol(特殊字符)，Binary data(二进制子串)
	Null  object(内部文档/对象)  code(js代码)  regex(正则子串)   
	ObjectId(自动生成ID标记)：_id：当mongodb插入文档时如果不指定_id域则自动生成_id域，值如果不自己指定即会自动生成一个objectId值
		24位16进制数：8位文档创建时间，6位机器id  4位进程id   6位计数器
	指定id插入：db.class1.insert({_id:1,'name':'lin','age':'25','sex':'man'})
	
集合中的文档：
	1.集合中的文档不一定有相同的域(个数/域/数据类型都可能不同)
	2.集合中文档各自比较独立，相互不影响，不支持外键关联
集合创建原则：
	1.集合中的文档要描述同一类事物
	2.数据库中同一类数据尽量集中存放在相同的集合
	3.集合中的文档嵌套层数不要太多
	插入操作中键可以不加引号，值需要加入引号
	_id可以指定，但是不能重复






02： MongoDB Shell 文档 

非关系型数据库和关系型数据库的区别
	1.不是以关系模型构建的，结构比较自由
	2.nosql不保障数据的一致性，但是读写能力强，抗高并发，海量数据处理
	3.nosql技术还在发展，功能没关系型数据库成熟强大

db.coll_name.find(query,field)   #功能：查找文档    参数：query  查找条件、相当于where字句    field查找的域(字段)(0表示不显示该域，1表示只显示该域)   返回值：查找到的所有文档
	db.class1.find({b:'2'})
	db.class1.find({age:'25'},{age:1,name:1})   #匹配age=25且只显示age和name域(字段)
	db.class1.find({age:'25'},{_id:0,name:1})   #_id特殊，不指定为0都会显示，其它域不能混写
db.coll_name.findOne(query,field)               #越慢插入越靠后。功能：查找第一条符合条件的文档   参数：同find    返回值：返回查找到的文档

比较操作符
$eq  等于  $lt 小于  $lte 小于等于  $gt 大于  $gte 大于等于  $ne不等于(使用ne也会查找到该域不存在的文档)
$in  在[]里面   $nin不包含
	db.class1.find({'a':{$eq:'5'}},{_id:0})        #注意只要用引号
	db.class1.find({'a':{$gt:'5',$lt:'8'}},{_id:0})
	所有的{}[]中都可以写多个条件
	db.class1.find({'a':{$in:['3','4','5']}},{_id:0})

逻辑比较符：
$and  在query如果写多个条件默认为$and
	 db.class1.find({'a':{$in:['3','5']},a:'5'},{_id:0})
	 等同于  db.class1.find({$and:[{a:{$in:['3','5']}},{a:'5'}]},{_id:0})
$or   逻辑或db.class1.find({$or:[{a:{$lt:5}},{'a':{$gt:'3'}}]},{_id:0})
$not  逻辑非
逻辑条件混合

Array：[1,2,3]   #但不是列表。1.数组是有序的数据集合   2.mongo中数组也可以有多重数据元素混合



2-00:00:00








03： 索引 聚合








04： Python操作MongoDB 增删改查